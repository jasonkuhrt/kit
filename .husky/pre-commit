#!/usr/bin/env sh

# Get list of staged files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)

# Only proceed if there are staged files
if [ -n "$STAGED_FILES" ]; then
  # Auto-format code
  pnpm fix:format

  # Re-stage only the files that were originally staged
  echo "$STAGED_FILES" | xargs git add
fi

# Always succeed (never block commit)
exit 0
